{"version":3,"file":"index.js","sources":["../src/modules/bullion.js","../src/modules/nepse.js","../src/modules/vegetable.js","../src/utils/apiService.js","../src/index.js"],"sourcesContent":["const schema = {\r\n  symbol: {\r\n    type: String,\r\n    required: true\r\n  },\r\n  date: {\r\n    type: Date,\r\n    required: true\r\n  },\r\n  price: {\r\n    type: Number,\r\n    required: true\r\n  }\r\n};\r\n\r\nclass Bullion {\r\n  constructor(cfg) {\r\n    Object.assign(this, cfg);\r\n    this.schema = schema;\r\n  }\r\n\r\n  async get(symbol) {\r\n    if (!symbol) return this.service.get(\"/bullion/current\");\r\n    else return this.service.get(\"/bullion/\" + symbol);\r\n  }\r\n}\r\n\r\nexport default Bullion;\r\n","const schema = {\r\n  symbol: {\r\n    type: String,\r\n    unique: true,\r\n    required: true\r\n  },\r\n  name: {\r\n    type: String,\r\n    required: true\r\n  },\r\n  date: {\r\n    type: Date,\r\n    required: true\r\n  },\r\n  close: {\r\n    type: Number,\r\n    required: true\r\n  },\r\n  volume: Number,\r\n  transaction_count: Number,\r\n  transaction_amount: Number,\r\n  maximum: Number,\r\n  minimum: Number,\r\n  previous_close: Number\r\n};\r\n\r\nclass Nepse {\r\n  constructor(cfg) {\r\n    Object.assign(this, cfg);\r\n    this.schema = schema;\r\n  }\r\n}\r\n\r\nexport default Nepse;\r\n","const schema = {\r\n  name: {\r\n    type: String,\r\n    required: true,\r\n    unique: true\r\n  },\r\n  group: String,\r\n  unit: String,\r\n  min: Number,\r\n  max: Number,\r\n  price: { type: Number, required: true }\r\n};\r\n\r\nclass Vegetable {\r\n  constructor(cfg) {\r\n    Object.assign(this, cfg);\r\n    this.schema = schema;\r\n  }\r\n}\r\n\r\nexport default Vegetable;\r\n","//import fetch from \"node-fetch\";\r\nconst fetch = require(\"node-fetch\");\r\n\r\nclass APIService {\r\n  constructor(cfg) {\r\n    let config = Object.assign({}, cfg);\r\n    Object.assign(this, config);\r\n    this.debugMode = this.debugMode || false;\r\n  }\r\n\r\n  async request(options) {\r\n    if (typeof options == \"string\") options = { path: options };\r\n    const url = options.url || `${this.url}${options.path}`;\r\n    if (options.body) options.body = JSON.stringify(options.body);\r\n\r\n    options.method = options.method || \"GET\";\r\n    options.useAccessToken = options.useAccessToken || true;\r\n    options.headers = options.headers || {};\r\n\r\n    options.headers[\"content-type\"] = \"application/json\";\r\n    //if (options.useAccessToken)\r\n    //  options.headers[\"access_token\"] = localStorage.getItem(\"access_token\");\r\n\r\n    let res = await fetch(url, options);\r\n    if (!res.ok) return this.badResponse(res);\r\n    let json = await res.json();\r\n    return json;\r\n  }\r\n\r\n  get(options) {\r\n    if (typeof options == \"string\") options = { path: options };\r\n    return this.request(options);\r\n  }\r\n\r\n  post(options) {\r\n    options.method = \"POST\";\r\n    return this.request(options);\r\n  }\r\n\r\n  put(options) {\r\n    options.method = \"PUT\";\r\n    return this.request(options);\r\n  }\r\n\r\n  delete(options) {\r\n    if (typeof options == \"string\") options = { path: options };\r\n    options.method = \"DELETE\";\r\n    return this.request(options);\r\n  }\r\n\r\n  patch(options) {\r\n    options.method = \"PATCH\";\r\n    return this.request(options);\r\n  }\r\n\r\n  notImplemented(name) {\r\n    Notify.warning(`${name} is not implemented`);\r\n  }\r\n\r\n  async badResponse(res) {\r\n    console.log(res);\r\n    let message = res.statusText;\r\n    //throw Error(message);\r\n  }\r\n}\r\n\r\nexport default APIService;\r\n","import bullion from \"./modules/bullion\";\r\nimport nepse from \"./modules/nepse\";\r\nimport vegetable from \"./modules/vegetable\";\r\n\r\nimport ApiService from \"./utils/apiService\";\r\n\r\nclass Client {\r\n  constructor(config) {\r\n    this.test = \"test\";\r\n    const service = new ApiService({\r\n      url: config.endpoint\r\n    });\r\n\r\n    let cfg = { service };\r\n\r\n    this.Bullion = new bullion(cfg);\r\n    this.Nepse = new nepse(cfg);\r\n    this.Vegetable = new vegetable(cfg);\r\n  }\r\n}\r\n\r\nexport default Client;\r\n"],"names":["const","schema","symbol","type","String","required","date","Date","price","Number","Bullion","constructor","cfg","Object","assign","this","get","service","unique","name","close","volume","transaction_count","transaction_amount","maximum","minimum","previous_close","Nepse","group","unit","min","max","Vegetable","fetch","require","APIService","config","debugMode","request","options","path","url","_this","body","JSON","stringify","method","useAccessToken","headers","res","ok","json","badResponse","post","put","delete","patch","notImplemented","Notify","warning","console","log","test","ApiService","endpoint","bullion","nepse","vegetable"],"mappings":"AAAAA,IAAMC,EAAS,CACbC,OAAQ,CACNC,KAAMC,OACNC,UAAU,GAEZC,KAAM,CACJH,KAAMI,KACNF,UAAU,GAEZG,MAAO,CACLL,KAAMM,OACNJ,UAAU,IAIRK,EACJC,SAAYC,GACVC,OAAOC,OAAOC,KAAMH,QACfX,OAASA,eAGVe,aAAId,cACHA,kBAAea,KACHE,QAAQD,IAAI,YAAcd,oBADvBa,KAAKE,QAAQD,IAAI,yDCtBzChB,IAAMC,EAAS,CACbC,OAAQ,CACNC,KAAMC,OACNc,QAAQ,EACRb,UAAU,GAEZc,KAAM,CACJhB,KAAMC,OACNC,UAAU,GAEZC,KAAM,CACJH,KAAMI,KACNF,UAAU,GAEZe,MAAO,CACLjB,KAAMM,OACNJ,UAAU,GAEZgB,OAAQZ,OACRa,kBAAmBb,OACnBc,mBAAoBd,OACpBe,QAASf,OACTgB,QAAShB,OACTiB,eAAgBjB,QAGZkB,EACJhB,SAAYC,GACVC,OAAOC,OAAOC,KAAMH,QACfX,OAASA,GC7BZA,EAAS,CACbkB,KAAM,CACJhB,KAAMC,OACNC,UAAU,EACVa,QAAQ,GAEVU,MAAOxB,OACPyB,KAAMzB,OACN0B,IAAKrB,OACLsB,IAAKtB,OACLD,MAAO,CAAEL,KAAMM,OAAQJ,UAAU,IAG7B2B,EACJrB,SAAYC,GACVC,OAAOC,OAAOC,KAAMH,QACfX,OAASA,GCfZgC,EAAQC,QAAQ,cAEhBC,EACJxB,SAAYC,OACNwB,EAASvB,OAAOC,OAAO,GAAIF,GAC/BC,OAAOC,OAAOC,KAAMqB,QACfC,UAAYtB,KAAKsB,YAAa,eAG/BC,iBAAQC,aAEkBxB,KADR,iBAAXwB,IAAqBA,EAAU,CAAEC,KAAMD,QAC5CE,EAAMF,EAAQE,QAAUC,MAAWH,cACrCA,EAAQI,OAAMJ,EAAQI,KAAOC,KAAKC,UAAUN,EAAQI,OAExDJ,EAAQO,OAASP,EAAQO,QAAU,MACnCP,EAAQQ,eAAiBR,EAAQQ,iBAAkB,EACnDR,EAAQS,QAAUT,EAAQS,SAAW,GAErCT,EAAQS,QAAQ,gBAAkB,mCAIlBf,EAAMQ,EAAKF,kBAAvBU,UACCA,EAAIC,mBACQD,EAAIE,QADDT,EAAKU,YAAYH,qDAKvCjC,aAAIuB,SACoB,iBAAXA,IAAqBA,EAAU,CAAEC,KAAMD,IAC3CxB,KAAKuB,QAAQC,gBAGtBc,cAAKd,UACHA,EAAQO,OAAS,OACV/B,KAAKuB,QAAQC,gBAGtBe,aAAIf,UACFA,EAAQO,OAAS,MACV/B,KAAKuB,QAAQC,gBAGtBgB,gBAAOhB,SACiB,iBAAXA,IAAqBA,EAAU,CAAEC,KAAMD,IAClDA,EAAQO,OAAS,SACV/B,KAAKuB,QAAQC,gBAGtBiB,eAAMjB,UACJA,EAAQO,OAAS,QACV/B,KAAKuB,QAAQC,gBAGtBkB,wBAAetC,GACbuC,OAAOC,QAAWxC,sCAGdiC,qBAAYH,cAChBW,QAAQC,IAAIZ,wECrDdtC,SAAYyB,QACL0B,KAAO,WAKRlD,EAAM,SAJM,IAAImD,EAAW,CAC7BtB,IAAKL,EAAO4B,iBAKTtD,QAAU,IAAIuD,EAAQrD,QACtBe,MAAQ,IAAIuC,EAAMtD,QAClBoB,UAAY,IAAImC,EAAUvD"}